webpackJsonp([131],{baoR:function(e,i,t){"use strict";var s=t("Xxa5"),a=t.n(s),r=t("exGp"),n=t.n(r),c=t("Dd8w"),l=t.n(c),o=t("NYxO"),d=t("RWSh");i.a={data:function(){return{price_id:0,agree:!1,isPaying:!1,showAgreement:!1}},computed:l()({},Object(o.mapState)({vip:function(e){return e.vip},user:function(e){return e.user.info}}),{isEnablePay:function(){return!!this.price_id&&(!!this.agree&&!this.isPaying)}}),mounted:function(){},methods:{toggleAgreement:function(){this.showAgreement=!this.showAgreement},onPay:function(){var e=n()(a.a.mark(function e(){var i,t,s,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isPaying=!0,i={price_id:this.price_id},this.vip.invite&&(i.invite_from=this.vip.invite.invite_from,i.invite_from_id=this.vip.invite.invite_from_id),e.next=5,d.a.post("/vip/order",i);case 5:t=e.sent,s=t.data,r=t.status,this.isPaying=!1,200===r&&"SUCCESS"===s.code?location.href="/payment?id="+s.order_id:s.msg&&weui.alert(s.msg);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}}},gdHc:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=t("baoR"),a=t("tLJy"),r=t("VU/8")(s.a,a.a,!1,null,null,null);r.options.__file="pages/vip/pay/index.vue",i.default=r.exports},tLJy:function(e,i,t){"use strict";var s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",[t("base-header",{attrs:{title:"开通会员特权"}}),t("div",{staticClass:"bg-white pd30 flex-wrp flex-between border-b"},[t("div",[e._v("开通服务")]),t("div",[e._v(e._s(e.user.vip_info?"续费":"开通")+"会员特权")])]),t("div",{staticClass:"weui-cells weui-cells_checkbox"},e._l(e.vip.config.prices,function(i,s){return t("label",{key:s,staticClass:"weui-cell"},[t("div",{staticClass:"weui-cell__hd"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.price_id,expression:"price_id"}],staticClass:"weui-check",attrs:{type:"radio",name:"id"},domProps:{value:i.id,checked:e._q(e.price_id,i.id)},on:{change:function(t){e.price_id=i.id}}}),t("i",{staticClass:"weui-icon-checked"})]),t("div",{staticClass:"weui-cell__bd"},[t("h4",{staticClass:"weui-media-box__title"},[e._v(e._s(i.title))]),t("p",{staticClass:"weui-media-box__desc size28"},[parseFloat(i.bounty)>0?[e._v("送"+e._s(i.bounty)+"优惠金，")]:e._e(),parseFloat(i.credit)>0?[e._v("送"+e._s(i.credit)+"积分")]:e._e()],2)]),t("div",{staticClass:"weui-cell__ft"},[e._v("￥"+e._s(i.price))])])}),0),t("div",{staticClass:"bg-white pt50 plr50"},[t("base-button",{staticClass:"weui-btn border-radius50 bg-black color10",attrs:{loading:e.isPaying,enabled:e.isEnablePay},on:{click:e.onPay}},[e._v("立即支付\n        ")])],1),t("div",{staticClass:"bg-white flex-wrp size30 flex-center pt10"},[t("label",{staticClass:"weui-agree pr5"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.agree,expression:"agree"}],staticClass:"weui-agree__checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.agree)?e._i(e.agree,null)>-1:e.agree},on:{change:function(i){var t=e.agree,s=i.target,a=!!s.checked;if(Array.isArray(t)){var r=e._i(t,null);s.checked?r<0&&(e.agree=t.concat([null])):r>-1&&(e.agree=t.slice(0,r).concat(t.slice(r+1)))}else e.agree=a}}}),t("span",{staticClass:"weui-agree__text color4 size4 pl10"},[e._v("同意并遵守")])]),t("span",{staticClass:"color5",on:{click:e.toggleAgreement}},[e._v("《微生活特权会员协议》")])]),t("div",{staticClass:"weui-cells"},[t("nuxt-link",{staticClass:"weui-cell weui-cell_access",attrs:{to:"/vip_pay_ticket"}},[t("div",{staticClass:"weui-cell__bd"},[e._v("激活码兑换")]),t("div",{staticClass:"weui-cell__ft"})])],1),e.showAgreement?t("div",{staticClass:"weui-mask",on:{click:e.toggleAgreement}}):e._e(),e.showAgreement?t("div",{staticClass:"fixed-bottom weui-animate-slide-up bg-white pd30",staticStyle:{"z-index":"1001"},on:{click:e.toggleAgreement}},[e._v(e._s(e.vip.config.agreement)+"\n    ")]):e._e()],1)};s._withStripped=!0;var a={render:s,staticRenderFns:[]};i.a=a}});