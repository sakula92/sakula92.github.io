webpackJsonp([130],{RrWW:function(t,e,i){"use strict";var n=i("Xxa5"),a=i.n(n),s=i("exGp"),r=i.n(s),c=i("Dd8w"),o=i.n(c),u=i("NYxO"),l=i("RWSh"),d=i("sLTV");e.a={data:function(){return{code:"",isPaying:!1}},asyncData:function(t){if(t.query&&t.query.code)return{code:t.query.code}},computed:o()({},Object(u.mapState)({vip:function(t){return t.vip}}),{isEnablePay:function(){return!this.isPaying&&8===this.code.length}}),methods:{onScan:function(){var t=r()(a.a.mark(function t(){var e,i,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.scanQRCode({needResult:1});case 2:e=t.sent,i=e.resultStr,n=l.a.serializeQuery(i.split("?")[1]),this.code=n.code;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onPay:function(){var t=r()(a.a.mark(function t(){var e,i,n,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={code:this.code},this.vip.invite&&(e.invite_from=this.vip.invite.invite_from,e.invite_from_id=this.vip.invite.invite_from_id),this.isPaying=!0,t.next=5,l.a.post("/vip/order",e);case 5:i=t.sent,n=i.data,s=i.status,this.isPaying=!1,200===s&&"SUCCESS"===n.code?weui.toast("开通成功",function(){location.href="/vip"}):n.msg&&weui.alert(n.msg,{title:"开通失败"});case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}},mMjt:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("RrWW"),a=i("zkK2"),s=i("VU/8")(n.a,a.a,!1,null,null,null);s.options.__file="pages/vip/pay/ticket.vue",e.default=s.exports},zkK2:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("base-header",{attrs:{title:"兑换特权会员"}}),i("div",{staticClass:"weui-cells"},[i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__hd"},[t._v("激活码")]),i("div",{staticClass:"weui-cell__bd pl30"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"weui-input",attrs:{type:"text",maxlength:"8",placeholder:"请输入8位英文数字组合激活码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),i("div",{staticClass:"weui-cell__ft",on:{click:t.onScan}},[i("i",{staticClass:"i i-ewm"})])])]),i("div",{staticClass:"weui-btn-area"},[i("base-button",{staticClass:"weui-btn border-radius50 bg-black color10",attrs:{loading:t.isPaying,enabled:t.isEnablePay},on:{click:t.onPay}},[t._v("立即兑换")])],1)],1)};n._withStripped=!0;var a={render:n,staticRenderFns:[]};e.a=a}});