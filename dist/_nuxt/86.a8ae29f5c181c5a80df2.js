webpackJsonp([86],{EbHm:function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body"},[i("div",{staticClass:"relative overflow-hidden"},[i("base-img",{staticClass:"w100 border-radius5",staticStyle:{height:"43vw"},attrs:{src:t.activity.thumb}}),i("div",{staticClass:"lottobg"}),i("div",{staticClass:"rule",on:{click:t.toggleRule}},[t._m(0),i("div",{staticClass:"relative ruleArrow"})])],1),i("div",{staticClass:"pd30"},[i("div",{staticClass:"border-radius20 relative pd30 wrap"},[i("div",{staticClass:"text-center color1 size28 title"},[i("div",{staticClass:"nowrap"},[t._v(t._s(t.activity.title))])]),i("div",{staticClass:"border-radius10 pd10 mt20 box"},[i("div",{staticClass:"flex-wrp bg-deepred border-radius5 mg5 pd10 color20 size24"},[i("div",[t._v("中奖名单：")]),i("div",{directives:[{name:"swiper",rawName:"v-swiper:noticeSwiper",value:{autoplay:3e3,loop:!0},expression:"{autoplay: 3000, loop: true}",arg:"noticeSwiper"}],staticClass:"flex-item w0 overflow-hidden"},[i("div",{staticClass:"swiper-wrapper"},t._l(t.notices,function(e,r){return i("div",{staticClass:"swiper-slide"},[t._v(t._s(e))])}),0)])]),i("div",{staticClass:"ptb5"},t._l(t.awardsGrid,function(e,s){return i("div",{key:s,staticClass:"flex-wrp"},t._l(e,function(e,a){return i("div",{key:a,staticClass:"flex-item w0 pd5",class:[e.className]},[1==s&&1==a?i("div",{staticClass:"flex-item border-radius10 flex-wrp flex-cell flex-center relative size24 startBtn",on:{click:t.startPlayer}},[t._v("立即抽奖")]):e.index?i("div",{staticClass:"border-radius10 pd10 item",class:{focus:e.index==t.activity.focusIndex}},[t.activity.awards[e.index]&&t.activity.awards[e.index].thumb?i("img",{staticClass:"border-radius10 w100 itemImg",style:{backgroundImage:"url("+t.activity.awards[e.index].thumb+")"},attrs:{src:r("FJiM")}}):t._e(),t.activity.awards[e.index]&&t.activity.awards[e.index].thumb?t._e():i("div",{staticClass:"flex-wrp flex-center border-radius10 w100 itemImg"},[i("i",{staticClass:"i i-ku size52 nothing"})]),t.activity.awards[e.index]?i("div",{staticClass:"size28 w100 pt10 text-nowrap color21 text-center"},[t._v(t._s(t.activity.awards[e.index].title))]):t._e()]):t._e()])}),0)}),0)]),i("div",{staticClass:"text-center size28 color20 pt20"},[t._v("剩余"+t._s(t.user.stock)+"次抽奖机会")])])]),i("div",{staticClass:"pd30"},[i("div",{staticClass:"text-center ptb30 border-radius30 color20 size24 btn",on:{click:t.showRecords}},[t._v("我的中奖记录")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showMask,expression:"showMask"}],staticClass:"weui-mask"}),t.showRule?i("div",{staticClass:"fixed-center bg-white flex-wrp flex-cell relative plr30 border-radius10 ptb50 modalbox"},[i("div",{staticClass:"size28 color21 text-center"},[t._v("活动规则")]),i("div",{staticClass:"flex-item size26 pd30 color3 my-img modalmain",domProps:{innerHTML:t._s(t.activity.rule)}}),i("div",{staticClass:"close pd10",on:{click:t.toggleRule}},[i("i",{staticClass:"i-close size60 color21"})])]):t._e(),t.showRecord?i("div",{staticClass:"fixed-center bg-white flex-wrp flex-cell relative plr30 border-radius10 ptb50 modalbox"},[i("div",{staticClass:"size28 color21 text-center"},[t._v("中奖详情")]),i("div",{staticClass:"flex-item overflow-auto-y",attrs:{id:"record-list"}},[t._l(t.user.record.records,function(e,r){return i("div",{key:r,staticClass:"flex-wrp flex-align-center ptb30 border-t"},[i("base-img",{staticClass:"border-radius img-90",attrs:{src:e.award.thumb}}),i("div",{staticClass:"flex-item plr20"},[i("div",{staticClass:"size28"},[t._v(t._s(e.award.title))]),i("div",{staticClass:"pt20 color4"},[t._v(t._s(e.winning_time))])]),i("div",{staticClass:"text-center border-radius50 ptb20 plr30",class:[e.is_get?"bg-smoke":"bg-pink color10"],on:{click:function(r){return t.getAward(e)}}},[t._v("\n                    "+t._s(e.is_get?"已领取":"立即领取")+"\n                ")])],1)}),i("load-more",{ref:"loadMore",attrs:{handler:t.fetchRecords}})],2),i("div",{staticClass:"close pd10",on:{click:t.hideRecords}},[i("i",{staticClass:"i-close size60 color21"})])]):t._e(),t.win?i("div",{staticClass:"fixed-center modalbox2"},[i("div",{staticClass:"bg-white relative ptb50 plr30 border-radius20"},[t.win.award?[i("div",{staticClass:"pt15 size36 color21 text-center"},[t._v("恭喜您！中奖了")]),i("div",{staticClass:"pt50"},[i("div",{staticClass:"flex-wrp flex-align-stretch pb50"},[i("div",{staticClass:"pr20"},[i("base-img",{staticClass:"border-radius5 awardImg",attrs:{src:t.win.award.thumb}})],1),i("div",{staticClass:"flex-item flex-wrp flex-cell"},[i("div",{staticClass:"flex-item flex-wrp flex-align-center size28"},[t._v(t._s(t.win.award.title))]),i("div",{staticClass:"flex-item flex-wrp flex-align-center size24 color4"},[t._v(t._s(t.win.award.time_create))])])])])]:i("div",{staticClass:"text-center size32 color6 pb50"},[t._v("与大奖擦肩而过")]),i("div",{staticClass:"text-center pt30"},[i("div",{staticClass:"plr50"},[t.win.award?i("div",{staticClass:"border-radius50 mlr50 ptb25 plr50 bg-pink color10 size24",on:{click:function(e){return t.getAward(t.win)}}},[t._v("立即领取")]):i("div",{staticClass:"border-radius50 mlr50 ptb25 plr50 bg-pink color10 size24",on:{click:t.hideWin}},[t._v("继续抽奖")])]),i("div",{staticClass:"size24 color4 pt30"},[i("div",[t._v("剩余抽奖次数："+t._s(t.user.stock))])])]),i("div",{staticClass:"close pd10",on:{click:t.hideWin}},[i("i",{staticClass:"i-close size40 color14"})])],2)]):t._e()])};i._withStripped=!0;var s={render:i,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ptb10 plr20 size24 color20"},[e("div",[this._v("活动")]),e("div",[this._v("规则")])])}]};e.a=s},EfuN:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,'.body[data-v-5ec4e0e3]{background-color:#faebcc;min-height:100vh}.lottobg[data-v-5ec4e0e3]{position:absolute;width:100%;top:50vw;bottom:0}.lottobg[data-v-5ec4e0e3]:after,.lottobg[data-v-5ec4e0e3]:before{content:"";position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.lottobg[data-v-5ec4e0e3]:before{background:#faebcc;width:120%;height:6.25rem;border-radius:50%;top:-3.125rem}.lottobg[data-v-5ec4e0e3]:after{background:url("http://public.duduapp.net/duLifeImg/lottocaidai.png") no-repeat;width:100%;height:11.1875rem;background-size:cover;top:-7.5rem}.rule[data-v-5ec4e0e3]{background:#ba0c0b;position:absolute;top:0;right:1.875rem}.ruleArrow[data-v-5ec4e0e3]:before{content:"";position:absolute;border-width:1.375rem;border-color:#ba0c0b #ba0c0b transparent;top:-.09375rem;border-style:solid;left:0;-webkit-transform:scaleY(.6) translateY(-50%);transform:scaleY(.6) translateY(-50%)}.wrap[data-v-5ec4e0e3]{background:-webkit-gradient(linear,left top,left bottom,from(#fd603f),to(#ff3c36));background:linear-gradient(#fd603f,#ff3c36);-webkit-box-shadow:#fbd981 .46875rem .46875rem 1.5625rem;box-shadow:.46875rem .46875rem 1.5625rem #fbd981}.box[data-v-5ec4e0e3]{background-color:#d12727}.title[data-v-5ec4e0e3]{width:14.09375rem;height:5.125rem;background:url("http://public.duduapp.net/duLifeImg/lottocat.png") no-repeat;background-size:cover;position:absolute;top:-4.21875rem;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);padding-top:3.4375rem;padding-left:2.1875rem;padding-right:2.1875rem;-webkit-box-sizing:border-box;box-sizing:border-box;line-height:1.25rem}.item[data-v-5ec4e0e3],.startBtn[data-v-5ec4e0e3]{background:#fef8d4;-webkit-box-shadow:#edaea7 0 .1875rem 0;box-shadow:0 .1875rem 0 #edaea7}.itemImg[data-v-5ec4e0e3]{background-color:#fbf2b9;background-position:50%;background-repeat:no-repeat;background-size:auto 95%;height:2.8125rem}.focus[data-v-5ec4e0e3]{background:#fed049}.nothing[data-v-5ec4e0e3]{color:#8c62ec}.startBtn[data-v-5ec4e0e3]{background:#fed04b;color:#a71c1f;-webkit-box-shadow:#ff5001 0 .1875rem 0;box-shadow:0 .1875rem 0 #ff5001}.startBtn[data-v-5ec4e0e3]:after,.startBtn[data-v-5ec4e0e3]:before{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"";width:.25rem;height:.25rem;border:.125rem solid #e49e2e;background:#fffde4;border-radius:50%}.startBtn[data-v-5ec4e0e3]:before{left:.3125rem}.startBtn[data-v-5ec4e0e3]:after{right:.3125rem}.btn[data-v-5ec4e0e3]{background:-webkit-gradient(linear,left top,left bottom,from(#ff844b),to(#ff3c36));background:linear-gradient(#ff844b,#ff3c36);-webkit-box-shadow:#fbd981 .3125rem .3125rem .9375rem;box-shadow:.3125rem .3125rem .9375rem #fbd981}.modalbox[data-v-5ec4e0e3]{z-index:1001;width:90%;height:70%;border-top:.125rem solid #ff6162}.modalbox2[data-v-5ec4e0e3]{width:90%;z-index:1001}.modalmain[data-v-5ec4e0e3]{overflow-y:auto}.awardImg[data-v-5ec4e0e3]{width:6.25rem;height:4.6875rem}.tips[data-v-5ec4e0e3]{position:absolute;top:0;left:0;border-bottom-right-radius:.3125rem}',""])},FJiM:function(t,e){t.exports="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},GHvN:function(t,e,r){"use strict";var i=r("woOf"),s=r.n(i),a=r("Xxa5"),o=r.n(a),c=r("exGp"),n=r.n(c),d=r("RWSh");e.a={data:function(){return{awardsGrid:[[{index:1},{index:2},{index:3}],[{index:8},{className:"flex-wrp flex-align-stretch"},{index:4}],[{index:7},{index:6},{index:5}]],showMask:!1,showRule:!1,showRecord:!1,notices:["1547**456","1843**987","1477**544"],win:!1}},head:function(){return{title:this.activity.title}},asyncData:function(){var t=n()(o.a.mark(function t(e){var r,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/lottery/"+e.query.id,null,e);case 2:if(r=t.sent,i=r.data,200!==(s=r.status)||"SUCCESS"!==i.code){t.next=9;break}return t.abrupt("return",{activity:i.activity,user:{stock:parseInt(i.luck_draw_num),record:{records:[]}}});case 9:return t.abrupt("return",e.error({statusCode:s,message:i.msg}));case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),methods:{fetchRecords:function(){var t=n()(o.a.mark(function t(){var e,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/lottery/"+this.activity.id+"/winninglog",{limit:10,offset:this.user.record.records.length});case 2:return e=t.sent,r=e.data,200===e.status&&"SUCCESS"===r.code&&(this.user.record=s()({},this.user.record,{records:this.user.record.records.concat(r.records||[])})),t.abrupt("return",{length:this.user.record.records.concat(r.records||[]),isMore:(r.records||[]).length>=10});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),toggleMask:function(){this.showMask=!this.showMask},toggleRule:function(){this.showRule=!this.showRule,this.toggleMask()},showRecords:function(){this.showRecord=!0,this.showMask=!0},hideRecords:function(){this.user.record={records:[]},this.showRecord=!1,this.showMask=!1},startPlayer:function(){var t=n()(o.a.mark(function t(){var e,r,i,s=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.user.stock<1)){t.next=2;break}return t.abrupt("return",weui.alert("剩余抽奖次数不足"));case 2:if(!this.timer){t.next=4;break}return t.abrupt("return");case 4:return this.timer=setInterval(function(){s.activity.focusIndex=s.activity.focusIndex>7?1:parseInt(s.activity.focusIndex)+1},100),t.next=7,d.a.post("/lottery/"+this.activity.id+"/player");case 7:e=t.sent,r=e.data,i=e.status,this.user.stock--,200===i&&"SUCCESS"===r.code?setTimeout(function(){s.stopPlayer(),s.playerToAward(r)},1500):(this.stopPlayer(),this.activity.focusIndex=0,r.msg&&weui.alert(r.msg));case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),stopPlayer:function(){clearInterval(this.timer),this.timer=!1},playerToAward:function(t){var e=this;this.activity.focusIndex=this.activity.focusIndex>7?1:parseInt(this.activity.focusIndex)+1,this.activity.focusIndex!==parseInt(t.award_index)?setTimeout(function(){e.playerToAward(t)},200):this.showWin(t.win||{})},showWin:function(t){this.win=t,this.showMask=!0},hideWin:function(){this.win=!1,this.showMask=!1},getAward:function(){var t=n()(o.a.mark(function t(e){var r,i,s,a,c=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=weui.loading("加载中..."),!e.is_get){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,d.a.post("/lottery/"+this.activity.id+"/prize/"+e.award.id+"/receive",{winning_id:e.id});case 5:i=t.sent,s=i.data,a=i.status,r.hide(),200===a&&"SUCCESS"===s.code?(weui.toast("领取成功",function(){c.hideWin()}),this.user.record.records[this.user.record.records.findIndex(function(t){return t.id===e.id})].is_get=!0):s.msg&&weui.alert(s.msg);case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}}},YSGD:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("GHvN"),s=r("EbHm"),a=!1;var o=function(t){a||r("vq7A")},c=r("VU/8")(i.a,s.a,!1,o,"data-v-5ec4e0e3",null);c.options.__file="pages/lottery/index.vue",e.default=c.exports},vq7A:function(t,e,r){var i=r("EfuN");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);r("rjj0")("ee78cdce",i,!1,{sourceMap:!1})}});