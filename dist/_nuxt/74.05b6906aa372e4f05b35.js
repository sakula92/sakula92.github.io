webpackJsonp([74],{D6qE:function(t,e,i){var s=i("zvsg");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("07ed726a",s,!1,{sourceMap:!1})},DStF:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{"data-reactroot":""}},[i("base-header",{attrs:{title:"信息确认"}}),i("div",{staticClass:"weui-cells__title"},[t._v(t._s(t.rim.title))]),i("div",{staticClass:"weui-cells"},[i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__bd"},[t._v("联系人:")]),i("div",{staticClass:"weui-cell__ft"},[t._v(t._s(t.user.truename))])]),i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__bd"},[t._v("联系方式:")]),i("div",{staticClass:"weui-cell__ft"},[i("div",{on:{click:t.onBindPhone}},[t._v(t._s(t.user.mobile?t.user.mobile:"点击绑定手机号")+" >")])])])]),i("div",{staticClass:"weui-cells__title"},[i("div",[t._v("出游人群")]),i("div",[t._v("\n            共 "),i("span",{staticClass:"color2"},[t._v(t._s(+t.quantity.adult+ +t.quantity.kid))]),t._v(" 人\n        ")])]),i("div",{staticClass:"weui-cells"},[i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__bd"},[t._v("成人")]),i("div",{staticClass:"weui-cell__ft"},[i("stepper",{attrs:{max:t.rim.stock-t.rim.sold-t.quantity.kid,min:0,value:t.quantity.adult},on:{onChange:function(e){return t.setQuantity("adult",e)}}})],1)]),i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__bd"},[t._v("儿童")]),i("div",{staticClass:"weui-cell__ft"},[i("stepper",{attrs:{max:t.rim.stock-t.rim.sold-t.quantity.adult,min:0,value:t.quantity.kid},on:{onChange:function(e){return t.setQuantity("kid",e)}}})],1)]),i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__bd"},[t._v("成人：")]),i("div",{staticClass:"weui-cell__ft"},[i("div",{staticClass:"size12"},[t._v("\n                    ￥"),i("span",{staticClass:"color13 size46"},[t._v(t._s(t._f("number_format")(t.rim.adult_price*t.quantity.adult)))]),t._v("元\n                ")])])]),i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__bd"},[t._v("儿童：")]),i("div",{staticClass:"weui-cell__ft"},[i("div",{staticClass:"size12"},[t._v("\n                    ￥"),i("span",{staticClass:"color13 size46"},[t._v(t._s(t._f("number_format")(t.rim.kid_price*t.quantity.kid)))]),t._v("元\n                ")])])])]),i("div",{staticClass:"weui-cells"},[i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__bd size24"},[i("span",{staticClass:"i-dhjl color0 pr10"}),t._v("开团时间：\n                "+t._s(t.rim.time_start)+"\n            ")]),t._m(0)])]),i("div",{style:{height:"100px"}}),t.rim.stock-t.rim.sold==0?i("div",{staticClass:"fixed-bottom ptb30  flex-wrp flex-center bg-smoke"},[i("div",{staticClass:"color5 size24 w100 mlr30 ptb15 bg-ddd text-center border-radius10"},[t._v("已售罄")])]):i("div",{staticClass:"plr25 ptb15 fixed-bottom"},[i("div",{staticClass:"bg-main border-radius10 ptb20 flex-wrp flex-center",on:{click:t.onPay}},[i("span",{staticClass:"color1 size30"},[t._v("提交订单")])])])],1)};s._withStripped=!0;var r={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__ft"},[e("div",{staticClass:"color14"},[this._v("不要错过呦~")])])}]};e.a=r},GWAw:function(t,e,i){"use strict";var s=i("e1sg"),r=i("WKtL"),a=i("VU/8")(s.a,r.a,!1,null,null,null);a.options.__file="components/Stepper.vue",e.a=a.exports},WKtL:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex-wrp flex-align-center"},[i("div",{staticClass:"ptb5 plr20 border border-radius5",on:{click:function(e){return t.change(t.value-1)}}},[t._v("-")]),i("div",{staticClass:"plr30"},[t._v(t._s(t.number))]),i("div",{staticClass:"ptb5 plr20 border border-radius5",on:{click:function(e){return t.change(t.value+1)}}},[t._v("+")])])};s._withStripped=!0;var r={render:s,staticRenderFns:[]};e.a=r},cMhl:function(t,e,i){"use strict";var s=i("Dd8w"),r=i.n(s),a=i("Xxa5"),n=i.n(a),l=i("exGp"),u=i.n(l),c=i("DHvs"),o=i("NYxO"),d=i("GWAw");e.a={head:{title:"周边游下单"},components:{Stepper:d.a},data:function(){return{filter:{limit:10},quantity:{adult:0,kid:0}}},asyncData:function(){var t=u()(n.a.mark(function t(e){var i,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.b.get("/rim/"+e.query.id,null,e);case 2:if(i=t.sent,s=i.data,200!==i.status||"SUCCESS"!==s.code){t.next=9;break}return t.abrupt("return",{rim:s.rim});case 9:return t.abrupt("return",e.error({statusCode:404,message:"商品下架或找不到"}));case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),computed:r()({},Object(o.mapState)({config:function(t){return t.config},user:function(t){return t.user.info}})),methods:{onPay:function(){var t=u()(n.a.mark(function t(){var e,i,s=this;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.user.mobile){t.next=3;break}return weui.alert("请先绑定手机号哦！"),t.abrupt("return");case 3:return t.next=5,c.b.post("/rim/order",{rim_id:this.rim.id,realname:this.user.truename,mobile:this.user.mobile,people:this.quantity.adult,child:this.quantity.kid});case 5:e=t.sent,"SUCCESS"===(i=e.data).code?location.href="/payment?id="+i.order_id:"您有未支付的订单,请先支付"===i.msg?weui.alert(i.msg,function(){s.$router.push({path:"/user_orders_rim"})},{title:"下单失败"}):weui.alert(i.msg,{title:"下单失败"});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),setQuantity:function(t,e){this.quantity[t]=e},onBindPhone:function(){this.$router.push("/user_setting_mobile")}}}},e1sg:function(t,e,i){"use strict";e.a={data:function(){return{number:this.value}},props:{value:{type:Number,required:!0},max:{type:Number,required:!0},min:{type:Number,required:!0}},methods:{change:function(t){return t>this.max?weui.topTips("最大不超过"+this.max):t<this.min?weui.topTips("最小不低于"+this.min):(this.number=t,void this.$emit("onChange",t))}}}},fXeT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("cMhl"),r=i("DStF"),a=!1;var n=function(t){a||i("D6qE")},l=i("VU/8")(s.a,r.a,!1,n,null,null);l.options.__file="pages/rim/pay.vue",e.default=l.exports},zvsg:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".bg{background:-webkit-gradient(linear,left top,left bottom,from(transparent),to(#000));background:linear-gradient(180deg,transparent,#000)}.pt200{padding-top:6.25rem}.btn{width:1.875rem;border:.03125rem solid #999;border-radius:.125rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.btn,.input{height:1.875rem;color:#333}.input{display:block;line-height:1.875rem;text-align:center;border:none;min-width:1.875rem}.btn[disabled]{color:#ddd;border:.03125rem solid #ddd}",""])}});