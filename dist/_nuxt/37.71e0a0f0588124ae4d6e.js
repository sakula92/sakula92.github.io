webpackJsonp([37],{"+0gm":function(t,e,i){"use strict";e.a={props:{user:{type:Object,required:!0}}}},"/iBV":function(t,e,i){var a=i("CwFb");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("dae77ee2",a,!1,{sourceMap:!1})},"1b95":function(t,e,i){var a=i("kXuz");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("eaadec44",a,!1,{sourceMap:!1})},"69Mf":function(t,e,i){t.exports=i.p+"img/vip_card2.56be814.png"},CwFb:function(t,e,i){var a=i("kxFB");(t.exports=i("FZ+f")(!1)).push([t.i,".tips[data-v-056d0ad6]{background:#ebcd71}.tips .end-time[data-v-056d0ad6]{background:url("+a(i("FTI9"))+") no-repeat 0;background-size:auto 100%;text-indent:2rem}.bg1[data-v-056d0ad6],.bg2[data-v-056d0ad6],.bg3[data-v-056d0ad6]{position:absolute;z-index:5;border-radius:50%;background:rgba(0,0,0,.03)}.bg1[data-v-056d0ad6]{top:.75rem;left:.375rem;width:1.71875rem;height:1.71875rem}.bg2[data-v-056d0ad6]{top:3.40625rem;left:2.875rem;width:.75rem;height:.75rem}.bg3[data-v-056d0ad6]{top:-1.0625rem;left:2.40625rem;width:4.0625rem;height:4.0625rem}.order-thumb[data-v-056d0ad6]{width:7.5rem;height:5.625rem}.type0[data-v-056d0ad6]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.coupon[data-v-056d0ad6],.type0[data-v-056d0ad6]{height:1.3125rem;line-height:1.3125rem;background:#f8f7f3}.coupon[data-v-056d0ad6]{color:#bb9436;position:relative}.bias[data-v-056d0ad6]{position:absolute;z-index:10;top:0;right:-.5625rem;display:inline-block;width:.5625rem;height:1.3125rem;background:url("+a(i("OdlG"))+') 0 0 no-repeat;background-size:100%}.tipVip[data-v-056d0ad6]{display:inline-block;width:1.875rem;height:1.0625rem;margin-left:.625rem;position:relative;z-index:10}.tipVip span[data-v-056d0ad6]{display:block;position:relative;z-index:10;line-height:100%;text-align:center;font-size:.5625rem;background:#414141;color:#eee386}.tipVip[data-v-056d0ad6]:before{content:"";position:absolute;z-index:5;top:0;left:-.3125rem;width:0;height:0;border:.3125rem solid transparent;border-top:.3125rem solid #414141}',""])},FTI9:function(t,e,i){t.exports=i.p+"img/vip_icon_is_my_vip.93a91a6.png"},FWtf:function(t,e,i){t.exports=i.p+"img/vip_card1.445bd31.png"},KhE5:function(t,e,i){t.exports=i.p+"img/vip_overdue.6bed92b.png"},L7fL:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("base-header",{attrs:{title:"嘟嘟特权"}},[i("div",{staticClass:"plr30 ptb15",attrs:{slot:"right"},slot:"right"},[i("i",{staticClass:"i size28 i-hb"},[i("span",{staticClass:"path1"}),i("span",{staticClass:"path2"}),i("span",{staticClass:"path3"}),i("span",{staticClass:"path4"})]),i("span",{staticClass:"size28 pl5 invite",on:{click:t.onRecommend}},[t._v("推荐有奖")])])]),t.user.vip_info?i("div",{staticClass:"flex-wrp flex-between flex-align-center plr25 ptb15 tips"},[i("div",{staticClass:"flex-wrp flex-center end-time"},[i("span",{staticClass:"size24 color2"},[t._v(t._s(t.user.vip_info.end_time)+"到期")])]),i("nuxt-link",{staticClass:"text-center size22 color34 bg-black ptb5 plr15 border-radius40",attrs:{to:"/order_vip"}},[t._v("立即续费")])],1):t._e(),i("vip-card",{staticClass:"pb50 my-vip",attrs:{user:t.user}}),i("div",{staticClass:"pd20 border-b bg-white size28 color2"},[t._v("消费记录")]),i("div",{staticClass:"flex-wrp bg-white"},[i("div",{staticClass:"flex-item ptb10 size28 text-center",class:[1===t.filter.module_id?"color10":"color5"],on:{click:function(e){t.filter.module_id=1}}},[t._v("会员抢购")]),i("div",{staticClass:"flex-item ptb10 size28 text-center",class:[6===t.filter.module_id?"color10":"color5"],on:{click:function(e){t.filter.module_id=6}}},[t._v("会员折扣")]),i("div",{staticClass:"flex-item ptb10 size28 text-center",class:[12===t.filter.module_id?"color10":"color5"],on:{click:function(e){t.filter.module_id=12}}},[t._v("会员礼品")])]),t._l(t.orders,function(e,a){return i("nuxt-link",{key:a,staticClass:"bg-white plr25 ptb20 flex-wrp border-b",attrs:{to:t.routePrefix[t.filter.module_id]+"_"+e.id}},[i("base-img",{staticClass:"order-thumb flex-item",attrs:{src:e.thumb}}),i("div",{staticClass:"flex-item flex-wrp flex-cell flex-between ptb10 pl20",staticStyle:{flex:"2"}},[i("div",{staticClass:"size28 color5 text-overflow-2"},[t._v(t._s(e.name))]),i("div",[1===t.filter.module_id?i("div",{staticClass:"size22 color6 mb10 type0"},[i("div",{staticClass:"pr5 coupon"},[t._v("\n                        优惠金￥"),i("span",{staticClass:"size28 bold"},[t._v(t._s(t._f("number_format")(e.used_bounty)))]),i("span",{staticClass:"bias"})]),i("div",{staticClass:"pl20"},[t._v("支付价￥"),i("span",{staticClass:"size28 bold"},[t._v(t._s(t._f("number_format")(e.cash_fee)))])])]):t._e(),6===t.filter.module_id?i("div",{staticClass:"mb10 ptb10"},[i("div",{staticClass:"color6 size24 mb10"},[i("span",{staticClass:"size30 bold"},[t._v(t._s(t._f("number_format")(e.vip_discount)))]),t._v("折\n                        "),i("span",{staticClass:"tipVip"},[i("span",{staticClass:"pd5"},[t._v("会员")])])]),i("div",{staticClass:"pl20 pr5 size22 inline-block coupon"},[t._v("\n                        优惠金￥"),i("span",{staticClass:"size28 bold"},[t._v(t._s(t._f("number_format")(e.used_bounty)))]),i("span",{staticClass:"bias"})])]):t._e(),12===t.filter.module_id?i("div",{staticClass:"mb10 ptb10"},[i("div",{staticClass:"color6 size24 mb10"},[i("span",{staticClass:"size30 bold"},[t._v(t._s(t._f("number_format")(e.cash_fee)))]),t._v("\n                        积分"),i("span",{staticClass:"tipVip"},[i("span",{staticClass:"pd5"},[t._v("会员")])]),i("del",{staticClass:"ml20 size22 color4"},[t._v(t._s(t._f("number_format")(e.total_fee))+"积分")])])]):t._e(),i("div",{staticClass:"size22 color4"},[t._v("下单时间："+t._s(e.created_at))])])])],1)}),t.isFetching?i("loading"):t._e(),i("div",{staticClass:"pd20 border-b bg-white size28 color2 mt20"},[t._v("购卡记录")]),t._l(t.logs,function(e,a){return i("div",{key:a,staticClass:"bg-white border-b plr25 ptb20 flex-wrp"},[i("div",{staticClass:"relative overflow-hidden flex-wrp flex-center flex-cell border-radius10 flex-item ptb20",style:{background:t.config[e.life].bg}},[i("div",{staticClass:"bg1"}),i("div",{staticClass:"bg2"}),i("div",{staticClass:"bg3"}),i("span",{staticClass:"size42 mb15 lh100 text",style:{color:t.config[e.life].color}},[t._v(t._s(t.config[e.life].en))]),i("span",{staticClass:"size42 color1 lh100 text"},[t._v(t._s(t.config[e.life].cn))]),e.is_activation_code?i("div",{staticClass:"codePay"},[t._v("激活码")]):t._e()]),i("div",{staticClass:"pl20 flex-wrp flex-cell flex-around",staticStyle:{flex:"2"}},[i("div",{staticClass:"size28 color5 text-nowrap"},[t._v("\n                支付价"),i("span",{staticClass:"color10"},[t._v(t._s(e.cash_fee))]),t._v("元\n                "),e.total_fee?i("del",{staticClass:"size24 color4 pl20"},[t._v("原价"+t._s(e.total_fee)+"元")]):t._e()]),i("div",{staticClass:"size22 color4 "},[t._v("购卡时间："+t._s(e.created_at))])])])})],2)};a._withStripped=!0;var s={render:a,staticRenderFns:[]};e.a=s},OdlG:function(t,e,i){t.exports=i.p+"img/vip_coupon_tip.4b57c6c.png"},ScIr:function(t,e,i){"use strict";var a=i("Xxa5"),s=i.n(a),r=i("exGp"),o=i.n(r),n=i("Dd8w"),d=i.n(n),l=i("wXCH"),c=i("NYxO"),p=i("RWSh");e.a={data:function(){return{config:{7:{color:"#7c8294",bg:"#646b84",cn:"周卡",en:"WEEK"},30:{color:"#5e7974",bg:"#4d615e",cn:"月卡",en:"MONTH"},90:{color:"#c3a87a",bg:"#d7c29f",cn:"季卡",en:"SEASON"},180:{color:"#536e81",bg:"#506879",cn:"半年卡",en:"HALF"},360:{color:"#babcc3",bg:"#a6a8b3",cn:"年卡",en:"YEAR"}},logs:[],isFetching:!1,orders:[],filter:{limit:6,offset:0,module_id:1},routePrefix:{1:"buying",6:"shop",12:"gift"}}},asyncData:function(t){t.store.state.user.info.vip_info||t.redirect("/vip")},components:{VipCard:l.a},computed:d()({},Object(c.mapState)({user:function(t){return t.user.info},vip:function(t){return t.vip.config}})),mounted:function(){this.fetchOrders(),this.fetchLogs()},watch:{"filter.module_id":function(){this.filter.offset=0,this.orders=[],this.fetchOrders()}},methods:{onRecommend:function(){var t=this;2!==parseInt(this.vip.is_invite)||this.user.is_vip?this.$router.push({path:"/vip_recommend"}):weui.confirm("您未开通嘟嘟特权",{title:"暂无法推荐",buttons:[{label:"暂不推荐",type:"default"},{label:"立即开通",type:"primary",onClick:function(){t.$router.push("/order_vip")}}]})},fetchOrders:function(){var t=o()(s.a.mark(function t(){var e,i,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.isFetching=!0,t.next=3,p.a.get("/user/vip/buy_logs",this.filter);case 3:e=t.sent,i=e.data,a=e.status,this.isFetching=!1,200===a&&"SUCCESS"===i.code&&(this.orders=i.list||[]);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),fetchLogs:function(){var t=o()(s.a.mark(function t(){var e,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("/user/vip/buy_logs",{module_id:14});case 2:e=t.sent,i=e.data,200===e.status&&"SUCCESS"===i.code&&(this.logs=i.list||[]);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}},epEh:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("ScIr"),s=i("L7fL"),r=!1;var o=function(t){r||i("/iBV")},n=i("VU/8")(a.a,s.a,!1,o,"data-v-056d0ad6",null);n.options.__file="pages/vip/myvip.vue",e.default=n.exports},kXuz:function(t,e,i){var a=i("kxFB");(t.exports=i("FZ+f")(!1)).push([t.i,".button[data-v-639a893d]{position:absolute;z-index:10;-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%);top:82%;right:21%;background:-webkit-gradient(linear,left top,left bottom,from(#fff1ba),to(#e9d070));background:linear-gradient(#fff1ba,#e9d070);-webkit-box-shadow:rgba(0,0,0,.2) 0 0 .3125rem;box-shadow:0 0 .3125rem rgba(0,0,0,.2)}.card[data-v-639a893d]{background-position:top;background-repeat:no-repeat;background-size:100% auto;height:43vw;border-radius:.3125rem}.head[data-v-639a893d]{position:absolute;z-index:3;top:37%;-webkit-transform:translateY(-50%);transform:translateY(-50%);left:1.34375rem}.avatar[data-v-639a893d]{position:absolute;left:1.34375rem;top:2.8125rem;border:.09375rem solid #e0c777;width:2.8125rem;height:2.8125rem}.nickname[data-v-639a893d]{position:absolute;left:4.6875rem;top:3.125rem;width:3.75rem;font-size:.875rem;font-weight:700}.card-no[data-v-639a893d]{position:absolute;left:4.6875rem;top:4.0625rem}.discount_use[data-v-639a893d],.exp_time[data-v-639a893d]{position:absolute;z-index:10;top:76%;left:5%}.discount_use[data-v-639a893d]{display:none}.price[data-v-639a893d]{display:none;position:absolute;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:10;left:77%;top:50%;width:6.25rem}.price3[data-v-639a893d]{display:none;position:absolute;z-index:10;right:5%;top:76%}.introduce[data-v-639a893d]{position:absolute;z-index:10;width:2.1875rem;height:2.1875rem;right:.3125rem;top:.3125rem}.myCard[data-v-639a893d]{position:absolute;z-index:5;width:100%;height:100%;top:.3125rem;left:.3125rem}.overdue[data-v-639a893d]{position:absolute;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);left:44%;top:53%;z-index:3;width:3.65625rem;height:3rem;background:url("+a(i("KhE5"))+") 0 0 no-repeat;background-size:100%}.card1[data-v-639a893d]{background-image:url("+a(i("FWtf"))+")}.card2[data-v-639a893d]{background-image:url("+a(i("69Mf"))+")}.my-vip .avatar[data-v-639a893d]{left:2.5rem;top:1.5625rem}.my-vip .nickname[data-v-639a893d]{text-align:center;left:2.03125rem;top:4.375rem}.my-vip .exp_time[data-v-639a893d]{left:6%;top:57%}.my-vip .button[data-v-639a893d],.my-vip .card-no[data-v-639a893d]{display:none}.my-vip .discount_use[data-v-639a893d],.my-vip .price3[data-v-639a893d],.my-vip .price[data-v-639a893d]{display:block}",""])},nFJ9:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pt50 plr50 overflow-hidden"},[i("div",{staticClass:"relative card",class:[t.user.vip_info?"card2":"card1"]},[i("avatar",{staticClass:"avatar",attrs:{src:t.user.avatar}}),i("div",{staticClass:"size26 color36 text-nowrap bold nickname"},[t._v(t._s(t.user.nickname))]),i("nuxt-link",{staticClass:"introduce",attrs:{to:"/vip_introduce"}}),t.user.vip_info?[i("div",{staticClass:"size28 color43 card-no"},[t._v("NO."+t._s(t.user.vip_info.card_no))]),t.moment().isAfter(t.user.vip_info.end_time)?i("div",{staticClass:"overdue"}):t._e(),i("nuxt-link",{staticClass:"myCard",attrs:{to:"/vip_myvip"}}),i("nuxt-link",{staticClass:"color43 size24 ptb5 plr30 border-radius30 button",attrs:{to:"/order_vip"}},[t._v("立即续费")]),i("div",{staticClass:"color43 size24 exp_time"},[t._v(t._s(t.user.vip_info.end_time)+"到期")]),t.user.vip_info.discount?[i("div",{staticClass:"color36 size24 discount_use"},[t._v("已用优惠金￥"+t._s(t._f("number_format")(t.user.vip_info.discount.use)))]),t.moment().isBefore(t.user.vip_info.end_time)?i("div",{staticClass:"color36 size24 text-center price"},[t._v("￥"+t._s(t._f("number_format")(parseFloat(t.user.vip_info.discount.use)+parseFloat(t.user.vip_info.discount.stock)))+"优惠金")]):t._e(),i("div",{staticClass:"color36 size24 price3"},[t._v("可用会员优惠金￥"+t._s(t._f("number_format")(t.user.vip_info.discount.stock)))])]:t._e()]:i("nuxt-link",{staticClass:"color43 size24 ptb5 plr30 border-radius30 button",attrs:{to:"/order_vip"}},[t._v("立即开通")])],2)])};a._withStripped=!0;var s={render:a,staticRenderFns:[]};e.a=s},wXCH:function(t,e,i){"use strict";var a=i("+0gm"),s=i("nFJ9"),r=!1;var o=function(t){r||i("1b95")},n=i("VU/8")(a.a,s.a,!1,o,"data-v-639a893d",null);n.options.__file="components/Vip/Card.vue",e.a=n.exports}});