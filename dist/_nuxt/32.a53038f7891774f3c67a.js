webpackJsonp([32],{"+wPl":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".title-box[data-v-5be04b30]{padding-left:1.0625rem;padding-top:.9375rem;padding-bottom:1.0625rem;width:100%}.top-title[data-v-5be04b30]{width:4.6875rem;font-family:PingFangSC-Medium;font-size:1.0625rem;height:1.3125rem;line-height:1.3125rem;color:#333;letter-spacing:0;background-image:-webkit-gradient(linear,left top,right top,color-stop(100%,rgba(245,109,35,.2)),to(rgba(245,109,35,.2)));background-image:linear-gradient(-270deg,rgba(245,109,35,.2) 100%,rgba(245,109,35,.2) 0);background-size:4.6875rem .46875rem;background-position:bottom;background-repeat:no-repeat}.more[data-v-5be04b30]{padding:0 .84375rem;height:1.75rem;line-height:1.75rem;color:#fff;text-align:center;border-top-left-radius:.875rem;border-bottom-left-radius:.875rem;background-image:linear-gradient(-135deg,#fba649,#f56d23)}.img[data-v-5be04b30]{width:20.21875rem;height:6.90625rem;margin:0 1%}.restaurant-slide[data-v-5be04b30]{-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:.46875rem;padding:.53125rem;-webkit-box-shadow:0 .125rem .28125rem .1875rem hsla(0,3%,88%,.32);box-shadow:0 .125rem .28125rem .1875rem hsla(0,3%,88%,.32)}.restaurant-slide .left-img[data-v-5be04b30]{width:5.75rem;height:5.8125rem;background-size:100% 100%;background-repeat:no-repeat;border-radius:.1875rem}.restaurant-slide .right-content[data-v-5be04b30]{width:13.125rem;padding:.3125rem 0 .3125rem .4375rem}.restaurant-slide .right-content li[data-v-5be04b30]:nth-child(2){height:2.25rem;width:100%;margin-right:auto}.restaurant-slide .right-content .tag span[data-v-5be04b30]{font-size:.75rem;max-width:33%}.restaurant-slide i[data-v-5be04b30],.special-slide i[data-v-5be04b30]{color:#ccc}.restaurant-slide .tese[data-v-5be04b30],.special-slide .tese[data-v-5be04b30]{font-size:.9375rem}.restaurant-slide .juli[data-v-5be04b30],.special-slide .juli[data-v-5be04b30]{font-size:.875rem}.restaurant-slide .renjun[data-v-5be04b30],.special-slide .renjun[data-v-5be04b30]{font-size:.8125rem}.restaurant-slide .star i[data-v-5be04b30],.special-slide .star i[data-v-5be04b30]{font-size:.875rem;color:#f56d23;vertical-align:middle}.new-comment[data-v-5be04b30]{padding-bottom:2.8125rem}",""])},DSg1:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w100 bg-white"},[i("div",{staticClass:"title-box flex-wrp flex-between flex-align-center"},[i("div",{staticClass:"top-title"},[t._v("种草餐厅")]),i("nuxt-link",{staticClass:"more size30 text-center",attrs:{to:{path:"/comments",query:{lat:t.lat,lng:t.lng,city_id:t.cityId}}}},[t._v("评论  "),i("i",{staticClass:"z z-right"})])],1),t.topList.length>0?i("div",{directives:[{name:"swiper",rawName:"v-swiper:topSwiper",value:t.topSwiperOption,expression:"topSwiperOption",arg:"topSwiper"}]},[i("div",{staticClass:"swiper-wrapper pb30"},t._l(t.topList,function(e,n){return i("div",{key:n,staticClass:"swiper-slide img"},[i("div",{staticClass:"flex-wrp restaurant-slide"},[i("div",{staticClass:"left-img border",style:{backgroundImage:"url("+e.logo+")"}}),i("ul",{staticClass:"flex-wrp flex-cell flex-between right-content"},[i("li",{staticClass:"flex-wrp flex-between flex-center"},[i("span",{staticClass:"flex-item size32 color37 font-Medium compulsory-row-one"},[t._v(t._s(e.name))]),i("span",{staticClass:"star"},[i("i",{staticClass:"z z-stars"}),t._v(" "),i("label",{staticClass:"size24 color11"},[t._v(t._s(parseFloat(e.score).toFixed(1)))])])]),i("li",{staticClass:"size26 color44 lineoverflow"},[t._v(t._s(e.bulletin))]),i("li",{staticClass:"flex-wrp flex-between color5 tag flex-align-center"},[i("span",{staticClass:"flex-wrp flex-align-center compulsory-row-one"},[i("i",{staticClass:"z z-dining tese"}),i("label",{staticClass:"ml10"},[t._v(t._s(e.tag))])]),i("span",{staticClass:"flex-wrp flex-align-center compulsory-row-one"},[i("i",{staticClass:"z z-location-o juli "}),i("label",{staticClass:"ml10"},[t._v(t._s(e.distance)+t._s(e.unit))])]),i("span",{staticClass:"flex-wrp flex-align-center compulsory-row-one"},[i("i",{staticClass:"z z-money renjun"}),i("label",{staticClass:"ml10"},[t._v(t._s(e.avg_price)+"/人均")])])])])])])}),0),i("div",{staticClass:"swiper-pagination-my"})]):t._e(),i("div",{staticClass:"pl10 pr10 new-comment"},[i("shop-comments")],1)])};n._withStripped=!0;var a={render:n,staticRenderFns:[]};e.a=a},Ds5F:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("Xxa5"),r=i.n(s),o=i("exGp"),c=i.n(o),l=i("DHvs"),d=i("NYxO");e.a={asyncData:function(){var t=c()(r.a.mark(function t(e){var i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={btnText:"登录",backUrl:e.query.url,loginParam:{},loginResponseData:{}},t.abrupt("return",i);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),computed:a()({},Object(d.mapState)({session:function(t){return t.session}})),mounted:function(){var t=this;window.loginForResponse=function(e,i,n,a){t.loginResponseData={type:"app",url:e,data:i,sign:n,avatar:a},t.getUserInfoForZyBank()},window.wechatLoginForResponse=function(e,i){t.loginResponseData={type:"wechat",data:e,sign:i},t.getUserInfoForZyBank()},window.onResponseError=function(){weui.toast("未正常登录,请重试")}},methods:{setUserCity:function(){var t=c()(r.a.mark(function t(e,i,n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this,t.next=3,l.b.get("/zybank/loginLogs",{city_id:e,type:i,status:n});case 3:a=t.sent,a.data;case 5:case"end":return t.stop()}},t,this)}));return function(e,i,n){return t.apply(this,arguments)}}(),getUserInfoForZyBank:function(){var t=c()(r.a.mark(function t(){var e,i,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.post("/zybank/setlogin",this.loginResponseData);case 2:if(e=t.sent,i=e.data,200!==e.status||"SUCCESS"!==i.code){t.next=13;break}return t.next=8,this.$store.dispatch("user/getUser");case 8:this.userinfo=this.$store.state.user.info,n=window.localStorage.getItem("current_city")?JSON.parse(window.localStorage.getItem("current_city")):{},this.setUserCity(n.city_id||"","0",n.status||"2"),t.next=14;break;case 13:weui.toast("登录失败");case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),Login:function(){var t=c()(r.a.mark(function t(e){var i,n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=location.href,t.next=3,l.b.get("/zybank/prelogin",{url:i});case 3:n=t.sent,a=n.data,200===n.status&&"SUCCESS"===a.code&&(this.loginParam=a.data),t.t0=e,t.next="app"===t.t0?10:"wechat"===t.t0?12:14;break;case 10:return Object(l.d)()?window.demo.clickOnAndroid(this.loginParam.loginUrl,this.loginParam.crypted,this.loginParam.sign):Object(l.e)()&&(window.location.href="objc://loginBank:/,"+this.loginParam.loginUrl+","+this.loginParam.crypted+","+this.loginParam.sign),t.abrupt("break",14);case 12:return Object(l.d)()?window.demo.wechatLoginOnAndroid():Object(l.e)()&&(window.location.href="objc://wechatLogin:/"),t.abrupt("break",14);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}},HYqT:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".comment-container[data-v-51e8a7f8]{width:100%;padding:0 1.25rem;-moz-column-count:2;column-count:2;-moz-column-gap:.6875rem;column-gap:.6875rem;-webkit-column-count:2;-webkit-column-gap:.6875rem}.waterfall-item[data-v-51e8a7f8]{page-break-inside:avoid;break-inside:avoid;-webkit-column-break-inside:avoid}.comment-title[data-v-51e8a7f8]{letter-spacing:.1875rem}.w48[data-v-51e8a7f8]{width:48%}.comment-item[data-v-51e8a7f8]{width:100%;-webkit-box-shadow:0 .15625rem .5rem .0625rem hsla(0,0%,80%,.4);box-shadow:0 .15625rem .5rem .0625rem hsla(0,0%,80%,.4);border-radius:.375rem;background-color:#fff}.comment-item .shop-img[data-v-51e8a7f8]{height:11.34375rem;width:100%}.comment-item .shop-img img[data-v-51e8a7f8]{border-top-left-radius:.3125rem;border-top-right-radius:.3125rem;width:100%;height:100%;max-width:100%;max-height:100%}.comment-content[data-v-51e8a7f8]{font-family:PingFangSC-Medium;font-size:.875rem;color:#333;letter-spacing:0}.comment-flex2[data-v-51e8a7f8]{-webkit-box-flex:2;-ms-flex:2;flex:2}.user-img[data-v-51e8a7f8]{width:1.25rem;height:1.25rem;border-radius:.625rem}",""])},IKki:function(t,e,i){var n=i("sq8M");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("763ec2ba",n,!1,{sourceMap:!1})},K28C:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("mchQ"),a=i("DSg1"),s=!1;var r=function(t){s||(i("IKki"),i("id2m"))},o=i("VU/8")(n.a,a.a,!1,r,"data-v-5be04b30",null);o.options.__file="pages/comment/topcomments.vue",e.default=o.exports},Ldk8:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".login-bounce[data-v-01f91858]{width:17.5rem;height:14.6875rem}.login_img[data-v-01f91858]{width:3.125rem;height:3.125rem}",""])},dkQO:function(t,e,i){"use strict";var n=i("xNpS"),a=i("qAyI"),s=!1;var r=function(t){s||i("hD5+")},o=i("VU/8")(n.a,a.a,!1,r,"data-v-51e8a7f8",null);o.options.__file="components/comments/HPageComment.vue",e.a=o.exports},fYTP:function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("div")};n._withStripped=!0;var a={render:n,staticRenderFns:[]};e.a=a},"hD5+":function(t,e,i){var n=i("HYqT");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("cd1b5b60",n,!1,{sourceMap:!1})},hxf6:function(t,e,i){"use strict";var n=i("Ds5F"),a=i("fYTP"),s=!1;var r=function(t){s||i("n0MW")},o=i("VU/8")(n.a,a.a,!1,r,"data-v-01f91858",null);o.options.__file="components/LoginZybankApp.vue",e.a=o.exports},id2m:function(t,e,i){var n=i("+wPl");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("40224d7e",n,!1,{sourceMap:!1})},mchQ:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("NYxO"),r=i("dkQO"),o=i("DHvs");e.a={middleware:"location",data:function(){var t=this;return{topSwiperOption:{autoplay:!1,loop:!1,speed:1500,slidesPerView:"auto",loopedSlides:3,centeredSlides:!0,direction:"horizontal",autoplayDisableOnInteraction:!1,observer:!0,observeParents:!0,pagination:".swiper-pagination-my",paginationHide:!0,paginationType:"bullets",onTap:function(e){var i=e.realIndex,n=t.topList[i].id;t.restaurantSensors(t.topList[i].name),t.$router.push({path:"/shop_"+n})}},lat:"",lng:"",cityId:"",topList:[]}},computed:a()({},Object(s.mapState)({user:function(t){return t.user},agentCity:function(t){return t.session.agentCity},currentCity:function(t){return t.session.currentCity},locationInfo:function(t){return t.session.locationInfo}})),components:{ShopComments:r.a},mounted:function(){this.locationInfo&&this.locationInfo.lat?(this.lat=this.locationInfo.lat,this.lng=this.locationInfo.lng):(this.lat=window.localStorage.getItem("lat")||window.sessionStorage.getItem("lat"),this.lng=window.localStorage.getItem("lng")||window.sessionStorage.getItem("lng")),this.agentCity&&this.currentCity?this.cityId=this.agentCity.city_id:window.sessionStorage.getItem("agent_city")?this.cityId=window.sessionStorage.getItem("agent_city").city_id:this.cityId=window.sessionStorage.getItem("current_city").city_id,this.topShop(),this.$forceUpdate()},methods:{topShop:function(){var t=this;o.b.webGet("/v3/home/recommend",{city_id:this.cityId,lng:this.lng,lat:this.lat},function(e){t.topList=e.data.data},function(e){t.topList=[]})},restaurantSensors:function(t){Object(o.l)("fm_shopRecommend",{},{shop_name:t})}}}},n0MW:function(t,e,i){var n=i("Ldk8");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("5b0a07a5",n,!1,{sourceMap:!1})},qAyI:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-white"},[i("van-list",{ref:"vanlist",attrs:{finished:t.finished,"finished-text":""},on:{load:t.fetchComments},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("div",{staticClass:"comment-container"},t._l(t.comments,function(e,n){return i("div",{key:n,staticClass:"waterfall-item",on:{click:function(i){return i.stopPropagation(),t.sensData("fm_homeClickItpose",e)}}},[i("div",{staticClass:"comment-item mb30 pb5 flex-wrp flex-cell"},[i("div",{staticClass:"shop-img"},[i("img",{attrs:{src:e.index_img}})]),i("div",{staticClass:"comment-content pt20 pb35 plr20"},[t._v(t._s(e.content))]),i("div",{staticClass:"w100 flex-wrp flex-align-center plr20 mtb20"},[i("img",{staticClass:"user-img mr10",attrs:{src:e.member.head_img}}),i("label",{staticClass:"color48 comment-flex2 size22 text-nowrap mr10"},[t._v(t._s(e.member.nickname))]),e.is_favorite?i("i",{staticClass:"z z-praise size28 mr10 color11",on:{click:function(i){return i.target!==i.currentTarget?null:(i.preventDefault(),t.like(e))}}}):i("i",{staticClass:"z z-praise-o size28 mr10 color44",on:{click:function(i){return i.target!==i.currentTarget?null:(i.preventDefault(),t.like(e))}}}),i("label",{staticClass:"size22",class:[e.is_favorite?"color11":"color44"]},[t._v(t._s(e.like_num))])])])])}),0),t.comments.length>0&&t.finished?i("no-more",{staticClass:"bg-white w100",attrs:{bgColor:"#ffffff"}}):t._e(),0==t.comments.length&&t.finished?i("no-result",{staticClass:"bg-white"}):t._e()],1),i("login",{ref:"loginref"})],1)};n._withStripped=!0;var a={render:n,staticRenderFns:[]};e.a=a},sq8M:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".swiper-pagination-my{width:100%;text-align:center;padding-bottom:.9375rem}.swiper-pagination-my .swiper-pagination-bullet{width:.375rem;height:.375rem;border-radius:.1875rem;background:#f5f5f5;margin-right:.375rem;border:.0625rem solid #fff;opacity:1;position:relative;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.swiper-pagination-my .swiper-pagination-bullet-active{background:#333}",""])},xNpS:function(t,e,i){"use strict";var n=i("Xxa5"),a=i.n(n),s=i("exGp"),r=i.n(s),o=i("Dd8w"),c=i.n(o),l=i("DHvs"),d=i("NYxO"),u=i("hxf6"),m=i("W6hx"),g=i("6GxD");e.a={components:{Login:u.a,NoMore:m.a,NoResult:g.a},data:function(){return{comments:[],loginFlag:!1,finished:!1,loading:!1,lat:"",lng:"",cityId:""}},computed:c()({},Object(d.mapState)({user:function(t){return t.user.info},agentCity:function(t){return t.session.agentCity},currentCity:function(t){return t.session.currentCity},locationInfo:function(t){return t.session.locationInfo}})),mounted:function(){this.user.id&&(this.loginFlag=!0),this.locationInfo&&this.locationInfo.lat?(this.lat=this.locationInfo.lat,this.lng=this.locationInfo.lng):(this.lat=window.localStorage.getItem("lat")||window.sessionStorage.getItem("lat"),this.lng=window.localStorage.getItem("lng")||window.sessionStorage.getItem("lng")),this.agentCity&&this.currentCity?this.cityId=this.agentCity.city_id:window.sessionStorage.getItem("agent_city")?this.cityId=window.sessionStorage.getItem("agent_city").city_id:this.cityId=window.sessionStorage.getItem("current_city").city_id},methods:{sensData:function(t,e){this.$router.push({path:"/comment_detail_"+e.id,query:{lat:this.lat,lng:this.lng,city_id:this.cityId}}),Object(l.l)(t)},fetchComments:function(){var t=r()(a.a.mark(function t(){var e,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,l.b.get("/v3/comment",{offset:this.comments.length,limit:10,lat:this.lat,lng:this.lng,city_id:this.cityId});case 3:return e=t.sent,"OK"===(i=e.data).msg&&2e5===i.code&&(this.comments=this.comments.concat(i.data||[])),0===i.data.length&&(this.finished=!0),this.loading=!1,t.abrupt("return",{length:this.comments.length,isMore:(i.data||[]).length>0});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),like:function(){var t=r()(a.a.mark(function t(e){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loginFlag||this.toLogin(),Object(l.l)("fm_homeClickLike"),t.next=4,l.b.post("/v3/member/favorite",{type:"7",target_id:e.id});case 4:i=t.sent,2e5===i.data.code&&(e.is_favorite?--e.like_num:++e.like_num,e.is_favorite=!e.is_favorite);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),toLogin:function(){Object(l.i)()?this.getWeixinUser():this.$refs.loginref.Login("app")},getWeixinUser:function(){var t=location.href,e=t.indexOf("?"),i=t.substr(e+1);this.userInfoQry(i)},userInfoQry:function(){var t=r()(a.a.mark(function t(e){var i,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.get("/weixin/tools/wxLogin",{urlParam:e});case 2:i=t.sent,n=i.data,200===i.status&&"SUCCESS"===n.code&&this.$store.dispatch("user/getUser");case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}}});