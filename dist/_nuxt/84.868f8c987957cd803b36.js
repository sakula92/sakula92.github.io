webpackJsonp([84],{"1CfF":function(t,e,o){(t.exports=o("FZ+f")(!1)).push([t.i,".thumb[data-v-6f267f49]{width:5rem;height:5rem}.w128[data-v-6f267f49]{width:4rem}.search-box[data-v-6f267f49]{background:#f1f1f1}.search-input[data-v-6f267f49]{background:transparent}.bgcolor[data-v-6f267f49]{background-color:#eee}input[type=search][data-v-6f267f49]{-webkit-appearance:none}input[data-v-6f267f49]::-webkit-search-cancel-button{display:none}.absolute[data-v-6f267f49]{position:absolute;right:0;top:35%;padding:.1875rem;border:.0625rem solid #f56d23;border-radius:.25rem}.w70[data-v-6f267f49]{width:70%}.w75[data-v-6f267f49]{width:75%}.colore[data-v-6f267f49]{color:#eee}.colore2[data-v-6f267f49]{color:#eb5436}.colorDB[data-v-6f267f49]{color:#db1013}.box-shadow[data-v-6f267f49]{box-shadow:0 0 .3125rem 0 hsla(0,0%,79%,.45);-webkit-box-shadow:0 0 .3125rem 0 hsla(0,0%,79%,.45)}[data-v-6f267f49]{background-color:#fff}",""])},"9Mlo":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("eGaV"),a=o("tdRy"),s=!1;var n=function(t){s||o("z/sD")},r=o("VU/8")(i.a,a.a,!1,n,"data-v-6f267f49",null);r.options.__file="pages/user/history.vue",e.default=r.exports},JT4a:function(t,e,o){t.exports=o.p+"img/load.ef9e840.png"},eGaV:function(t,e,o){"use strict";var i=o("Dd8w"),a=o.n(i),s=o("Xxa5"),n=o.n(s),r=o("exGp"),l=o.n(r),c=o("RWSh"),f=o("DHvs"),d=o("NYxO"),u=o("W6hx"),h=o("6GxD");e.a={head:function(){return{title:"中原吃货地图"}},data:function(){return{shopList:[],finished:!1,loading:!1,currentType:"shop"}},asyncData:function(){var t=l()(n.a.mark(function t(e){var o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o={limit:10,offset:0,lng:e.query.lng,lat:e.query.lat},t.abrupt("return",{filter:o});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),computed:a()({},Object(d.mapState)({locationInfo:function(t){return t.session.locationInfo}})),components:{NoMore:u.a,NoResult:h.a},mounted:function(){this.locationInfo&&(this.lng=this.locationInfo.lng,this.lat=this.locationInfo.lat)},methods:{toBuying:function(t){var e=t.item&&t.item.id;t&&t.item&&"0"===t.item.commodity_type?this.$router.push({path:"buying_"+e}):this.$router.push({path:"foodCoupon",query:{id:e}})},toShop:function(t){Object(f.l)("fm_viewHistoryClickShop");var e=t.item&&t.item.shop_id;this.$router.push({path:this.currentType+"_"+e})},fetchHistory:function(){var t=this;this.loading=!0;localStorage.getItem("lng"),localStorage.getItem("lat");c.a.webGet("/v3/member/view-history",{offset:this.shopList.length,limit:10},function(e){t.loading=!1,(e.data.list&&e.data.list.length<10||!e.data.list)&&(t.finished=!0),t.shopList=t.shopList.concat(e.data.list||[])},function(){t.loading=!1,t.finished=!0})}}}},tdRy:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-list",{class:t.shopList&&0!==t.shopList.length?"pt20":"",attrs:{finished:t.finished},on:{load:t.fetchHistory},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.shopList,function(e,a){return i("div",{key:a,staticClass:"flex-wrp bg-white pd30 mb20 ml30 mr30 border-radius10 border-b box-shadow",on:{click:function(o){return o.stopPropagation(),t.toBuying(e)}}},[e.item&&e.item.thumbnail?i("base-img",{staticClass:"thumb",attrs:{src:e.item&&e.item.thumbnail}}):i("div",{staticClass:"flex-wrp flex-center bg-default thumb"},[i("img",{staticStyle:{width:"36px",height:"30px"},attrs:{src:o("JT4a")}})]),i("div",{staticClass:"pl20 w0 flex-item relative flex-wrp flex-cell flex-between"},[i("div",{staticClass:"size32 compulsory-row-one bold color37"},[t._v(t._s(e.item&&e.item.name))]),i("div",{staticClass:"size24 compulsory-row-one color44 w70"},[i("span",{staticClass:"colorDB size38"},[t._v("¥"+t._s(t._f("number_format")(e.item&&e.item.qg_price))+" ")]),i("span",{staticClass:"del"},[t._v("¥"+t._s(t._f("number_format")(e.item&&e.item.price)))])]),i("div",{staticClass:"size24 compulsory-row-one color44"},[t._v("浏览时间："+t._s(e.view_date))]),i("div",{staticClass:"absolute color11 size28",on:{click:function(o){return o.stopPropagation(),t.toShop(e)}}},[t._v("进入店铺")])])],1)}),t.shopList&&t.shopList.length>0&&t.finished?i("no-more",{staticClass:"mt10",attrs:{bgColor:"#ffffff"}}):t._e(),t.shopList&&0!==t.shopList.length||!t.finished?t._e():i("no-result")],2)],1)};i._withStripped=!0;var a={render:i,staticRenderFns:[]};e.a=a},"z/sD":function(t,e,o){var i=o("1CfF");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o("rjj0")("5eddba0c",i,!1,{sourceMap:!1})}});