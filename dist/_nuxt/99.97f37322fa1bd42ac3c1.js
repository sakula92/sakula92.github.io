webpackJsonp([99],{"1Pjj":function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,".weui-vcode-btn[data-v-251352c8]{color:#18baf9}",""])},"8mky":function(e,t,i){var s=i("1Pjj");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);i("rjj0")("610836fb",s,!1,{sourceMap:!1})},FEq2:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{attrs:{title:"绑定手机号"}}),i("div",{staticClass:"weui-cells"},[i("div",{staticClass:"weui-cell"},[e._m(0),i("div",{staticClass:"weui-cell__bd"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.mobile,expression:"mobile",modifiers:{trim:!0}}],staticClass:"weui-input",attrs:{type:"text",maxlength:"11",placeholder:"请填手机号",pattern:"[0-9]*"},domProps:{value:e.mobile},on:{input:function(t){t.target.composing||(e.mobile=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),i("div",{staticClass:"weui-cell weui-cell_vcode"},[e._m(1),i("div",{staticClass:"weui-cell__bd"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.verifyCode,expression:"verifyCode",modifiers:{trim:!0}}],staticClass:"weui-input",attrs:{type:"text",maxlength:"6",placeholder:"请填写验证码",pattern:"[0-9]*"},domProps:{value:e.verifyCode},on:{input:function(t){t.target.composing||(e.verifyCode=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),i("div",{staticClass:"weui-cell__ft"},[i("button",{staticClass:"weui-vcode-btn",attrs:{disabled:e.timeValue>0},on:{click:e.fetchVCode}},[e._v(e._s(e.timeValue>0?e.timeValue+"s":"获取验证码"))])])])]),i("div",{staticClass:"weui-btn-area"},[i("base-button",{attrs:{loading:e.isSaving,enabled:e.isEnabledSave},on:{click:e.saveInfo}})],1)],1)};s._withStripped=!0;var a={render:s,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"weui-cell__hd"},[t("label",{staticClass:"weui-label"},[this._v("手机号")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"weui-cell__hd"},[t("label",{staticClass:"weui-label"},[this._v("验证码")])])}]};t.a=a},JrSW:function(e,t,i){"use strict";var s=i("Xxa5"),a=i.n(s),r=i("exGp"),n=i.n(r),o=i("Dd8w"),u=i.n(o),l=i("NYxO"),c=i("DHvs");t.a={data:function(){return{isSaving:!1,timeValue:0,mobile:"",verifyCode:""}},computed:u()({},Object(l.mapState)({user:function(e){return e.user.info}}),{isEnabledSave:function(){return!!Object(c.g)(this.mobile)&&(!(this.verifyCode.length<6)&&!this.isSaving)}}),beforeDestroy:function(){this.timer&&clearInterval(this.timer)},methods:u()({},Object(l.mapActions)({setInfo:"user/setInfo"}),{fetchVCode:function(){var e=n()(a.a.mark(function e(){var t,i,s=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.timeValue>0)){e.next=2;break}return e.abrupt("return");case 2:if(Object(c.g)(this.mobile)){e.next=5;break}return weui.topTips("请填写正确的手机号"),e.abrupt("return");case 5:return e.next=7,c.b.get("/verifycode",{mobile:this.mobile});case 7:t=e.sent,i=t.data,200===t.status&&"SUCCESS"===i.code&&(weui.alert("短信验证码"+i.minutes+"分钟内有效",{title:"发送成功"}),this.timeValue=60,this.timer=setInterval(function(){s.timeValue>0&&s.timeValue--},1e3));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),saveInfo:function(){var e=n()(a.a.mark(function e(){var t,i,s,r=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isSaving=!0,e.next=3,c.b.put("/user/setting/mobile",{mobile:this.mobile,verifycode:this.verifyCode});case 3:t=e.sent,i=t.data,s=t.status,this.isSaving=!1,200===s&&"SUCCESS"===i.code?(this.setInfo({mobile:this.mobile}),weui.toast("保存成功",function(){r.$router.back()})):i.msg&&weui.alert(i.msg);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})}},rWfj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("JrSW"),a=i("FEq2"),r=!1;var n=function(e){r||i("8mky")},o=i("VU/8")(s.a,a.a,!1,n,"data-v-251352c8",null);o.options.__file="pages/user/setting/mobile.vue",t.default=o.exports}});