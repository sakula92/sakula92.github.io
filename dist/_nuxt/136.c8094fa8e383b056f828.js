webpackJsonp([136],{"39Gp":function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("base-header",{attrs:{title:"收货地址"}}),t("div",{staticClass:"weui-cells"},[t("div",{staticClass:"weui-cell"},[e._m(0),t("div",{staticClass:"weui-cell__bd"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.address.realname,expression:"address.realname",modifiers:{trim:!0}}],staticClass:"weui-input",attrs:{type:"text",maxlength:"6"},domProps:{value:e.address.realname},on:{input:function(s){s.target.composing||e.$set(e.address,"realname",s.target.value.trim())},blur:function(s){return e.$forceUpdate()}}})])]),t("div",{staticClass:"weui-cell"},[e._m(1),t("div",{staticClass:"weui-cell__bd"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.address.mobile,expression:"address.mobile",modifiers:{trim:!0}}],staticClass:"weui-input",attrs:{type:"text",pattern:"[0-9]*",maxlength:"11"},domProps:{value:e.address.mobile},on:{input:function(s){s.target.composing||e.$set(e.address,"mobile",s.target.value.trim())},blur:function(s){return e.$forceUpdate()}}})])]),t("div",{staticClass:"weui-cell"},[e._m(2),t("div",{staticClass:"weui-cell__bd"},[t("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.address.address,expression:"address.address",modifiers:{trim:!0}}],staticClass:"weui-textarea bg-white",attrs:{maxlength:"60",minlength:"50",row:"3"},domProps:{value:e.address.address},on:{input:function(s){s.target.composing||e.$set(e.address,"address",s.target.value.trim())},blur:function(s){return e.$forceUpdate()}}})])])]),t("div",{staticClass:"weui-btn-area"},[t("base-button",{attrs:{loading:e.isSaving,enabled:e.isEnabledSave},on:{click:e.saveAddress}})],1)],1)};a._withStripped=!0;var r={render:a,staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label"},[this._v("收货人")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label"},[this._v("联系电话")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label"},[this._v("详细地址")])])}]};s.a=r},MdJm:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("i7qf"),r=t("39Gp"),i=t("VU/8")(a.a,r.a,!1,null,null,null);i.options.__file="pages/user/address/_id.vue",s.default=i.exports},i7qf:function(e,s,t){"use strict";var a=t("Xxa5"),r=t.n(a),i=t("exGp"),n=t.n(i),d=t("RWSh");s.a={data:function(){return{isSaving:!1,address:{id:0,realname:"",mobile:"",address:""}}},asyncData:function(){var e=n()(r.a.mark(function e(s){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.query.id){e.next=10;break}return e.next=3,d.a.get("/user/address/"+s.query.id,null,s);case 3:if(t=e.sent,a=t.data,200!==t.status||"SUCCESS"!==a.code){e.next=8;break}return e.abrupt("return",{address:a.address});case 8:e.next=11;break;case 10:return e.abrupt("return",{address:{}});case 11:case"end":return e.stop()}},e,this)}));return function(s){return e.apply(this,arguments)}}(),computed:{isEnabledSave:function(){return!!this.address.realname&&(!!this.address.mobile&&(!!this.address.address&&(!(this.address.address.length<5)&&(!(this.address.address.length>60)&&!this.isSaving))))}},methods:{saveAddress:function(){var e=n()(r.a.mark(function e(){var s,t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSaving=!0,!this.address.id){e.next=7;break}return e.next=4,d.a.put("/user/address/"+this.address.id,this.address);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,d.a.post("/user/address",this.address);case 9:e.t0=e.sent;case 10:s=e.t0,t=s.data,a=s.status,this.isSaving=!1,200===a&&"SUCCESS"===t.code?weui.toast("保存成功",function(){history.back()}):weui.alert(t.msg,{title:"保存失败"});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}}}});