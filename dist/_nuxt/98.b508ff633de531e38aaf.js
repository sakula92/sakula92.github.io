webpackJsonp([98],{CwsT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("PW+x"),r=i("oKZq"),a=!1;var l=function(t){a||i("dcLc")},n=i("VU/8")(s.a,r.a,!1,l,null,null);n.options.__file="pages/user/win/index.vue",e.default=n.exports},"PW+x":function(t,e,i){"use strict";var s=i("Xxa5"),r=i.n(s),a=i("exGp"),l=i.n(a),n=i("woOf"),c=i.n(n),o=i("Dd8w"),f=i.n(o),d=i("NYxO"),u=i("DHvs"),p=Object(d.createNamespacedHelpers)("user").mapState;e.a={data:function(){return{prizes:[],showDetail:!1,isShowQRCode:!1,current:{},filter:{limit:10}}},computed:f()({},p({user:function(t){return t.info}})),watch:{filter:function(){var t=this;this.$nextTick(function(){t.$refs.loadMore.$refs.infiniteLoading.$emit("$InfiniteLoading:reset")})}},methods:{onShowDetail:function(t){this.current=t,this.showDetail=!0},onFilter:function(t){this.prizes=[],this.filter=c()({},this.filter,t)},fetchMore:function(){var t=l()(r.a.mark(function t(){var e,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.get("/user/prizes",c()({},this.filter,{offset:this.prizes.length}));case 2:return e=t.sent,i=e.data,this.prizes=this.prizes.concat(i.prizes||[]),t.abrupt("return",{length:this.prizes.length,isMore:(i.prizes||[]).length>=this.filter.limit});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}},dcLc:function(t,e,i){var s=i("tPF3");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("dc5f68a8",s,!1,{sourceMap:!1})},oKZq:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("base-header",[i("div",{staticClass:"flex-wrp flex-align-center",attrs:{slot:"title"},slot:"title"},[t._v("\n            中奖记录\n        ")])]),t._l(t.prizes,function(e){return i("div",{key:e.id,staticClass:"flex-wrp bg-white mt20 pd20",on:{click:function(i){return t.onShowDetail(e)}}},[i("img",{staticClass:"mr20",style:{width:"80px",height:"60px"},attrs:{src:e.image,alt:""}}),i("div",{staticClass:"flex-item flex-wrp flex-cell flex-middle overflow-hidden"},[i("div",{staticClass:"flex-wrp flex-between mb20 size32"},[i("div",{staticClass:"text-nowrap"},[t._v(t._s(e.title))]),i("div",{staticClass:"color0 equal-no size26 compulsory-no-row"},[t._v(t._s("2"===e.status?"待使用":"已使用"))])]),i("div",{staticClass:"flex-wrp flex-between"},[i("div",{staticClass:"color4 size20"},[t._v(t._s(e.datetime))]),i("div",{staticClass:"size24"},[t._v("详情")])])])])}),i("load-more",{ref:"loadMore",attrs:{handler:t.fetchMore}}),t.showDetail?i("div",{staticClass:"fixed-bottom fullHeight bg-white flex-wrp flex-cell",class:{"weui-animate-slide-up":t.showDetail}},[i("div",{staticClass:"weui-form-preview"},[i("div",{staticClass:"bg-white mt20 pl30"},[t._m(0),i("div",{staticClass:"color5 size26 pb20"},[t._v("\n                    "+t._s(t.current.title)+"\n                ")])]),i("div",{staticClass:"bg-white mt20 pl30"},[i("div",{staticClass:"flex-wrp flex-between flex-align-center pr30"},[i("div",[t._m(1),i("div",{staticClass:"color5 size26 pb20"},[t._v("\n                            "+t._s(t.current.code)+"\n                        ")])]),i("i",{staticClass:"i i-ewm color5 size50",on:{click:function(e){t.isShowQRCode=!0}}})]),i("div",{staticClass:"ptb20 pr30 flex-wrp flex-align-center flex-between border-t"},[i("div",{staticClass:"color2 size30"},[t._v("核销方：")]),i("div",{staticClass:"color33 size30"},[t._v(" "+t._s(t.current.applyTo))])])]),i("div",{staticClass:"bg-white mt20 pl30"},[i("div",{staticClass:"ptb20 pr30 flex-wrp flex-align-center flex-between"},[i("div",{staticClass:"color2 size30"},[t._v("兑换状态：")]),i("div",{staticClass:"color5 size26"},[t._v(t._s("2"===t.current.status?"待使用":"已使用"))])])]),i("div",{staticClass:"bg-white mt20 pl30"},[i("div",{staticClass:"ptb20 pr30 flex-wrp flex-align-center flex-between"},[i("div",{staticClass:"color2 size30"},[t._v("领取时间：")]),i("div",{staticClass:"color5 size26"},[t._v(t._s(t.current.datetime))])])])]),i("div",{staticClass:"weui-btn-area"},[i("base-button",{on:{click:function(e){t.showDetail=!1}}},[t._v("关闭")])],1),t.isShowQRCode?i("div",{staticClass:"weui-mask weui-animate-fade-in",on:{click:function(e){e.preventDefault(),t.isShowQRCode=!1}}}):t._e(),t.isShowQRCode?i("div",{staticClass:"weui-animate-fade-in bg-white pd30 border border-radius30 fixed-center qrcode",on:{click:function(e){e.preventDefault(),t.isShowQRCode=!1}}},[i("base-img",{staticClass:"w100",attrs:{src:t.current.qrcode},on:{click:function(e){e.preventDefault(),t.isShowQRCode=!1}}}),i("div",{staticClass:"color5 size28 pt20 text-center"},[t._v("请将二维码出示给商家")])],1):t._e()]):t._e()],2)};s._withStripped=!0;var r={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ptb20 pr30 flex-wrp flex-align-center flex-between"},[e("div",{staticClass:"color2 size30"},[this._v("中奖名称：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ptb20 pr30 flex-wrp flex-align-center flex-between"},[e("div",{staticClass:"color2 size30"},[this._v("核销码：")])])}]};e.a=r},tPF3:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".qrcode{width:70%;z-index:1001}",""])}});