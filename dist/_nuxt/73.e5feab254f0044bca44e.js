webpackJsonp([73],{"0NhW":function(t,e,s){"use strict";s.d(e,"a",function(){return u});var i=s("Xxa5"),o=s.n(i),r=s("mvHQ"),a=s.n(r),c=s("exGp"),l=s.n(c),n=s("DHvs"),d=function(){var t=l()(o.a.mark(function t(e,s,i,r){var c,l,d,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("http--/weixin/tools/get_ticket"),t.next=3,n.b.get("/weixin/tools/get_ticket",{url:r||location.href});case 3:c=t.sent,l=c.data,d=c.status,console.log(d),200===d&&"SUCCESS"===l.code&&(u={appId:l.appId,timestamp:l.timestamp,nonceStr:l.nonceStr,signature:l.signature,jsApiList:e},i&&(i.link=l.url),console.log(a()(u)+"=====weixingetconfig.js"),n.o.setConfig(u),n.o.ready().then(function(){"1"===s?(n.o.hideAllNonBaseMenuItem(),n.o.showMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:QZone"]}),n.o.setShareNew(i)):n.o.hideAllNonBaseMenuItem()}));case 8:case"end":return t.stop()}},t,this)}));return function(e,s,i,o){return t.apply(this,arguments)}}(),u=function(t,e,s,i){console.log(t),console.log("wxSetConfig"),console.log(n.o),d(t,e,s,i)}},"63VR":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("vcu4"),o=s("EDZZ"),r=!1;var a=function(t){r||s("ZRAU")},c=s("VU/8")(i.a,o.a,!1,a,"data-v-5cc1cab3",null);c.options.__file="pages/activity/_id.vue",e.default=c.exports},EDZZ:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[1==t.is_groups?i("div",{staticClass:"bg-white cate"},[i("div",{directives:[{name:"swiper",rawName:"v-swiper:cateSwiper",value:{},expression:"{}",arg:"cateSwiper"}],staticClass:"relative border-b overflow-hidden flex-wrp flex-align-center"},[i("div",{staticClass:"swiper-wrapper"},t._l(t.cateGroup,function(e,s){return i("div",{key:s,staticClass:"swiper-slide flex-wrp"},t._l(e,function(e,s){return i("div",{key:s,staticClass:"flex-wrp flex-center pl10 w25"},[i("i",{staticClass:"i-location-o",class:t.filter.category_id==e.id?"cate-active":"color1"}),i("div",{staticClass:"block ptb20 size28 text-center text-nowrap",class:{"cate-active":t.filter.category_id==e.id},on:{click:function(s){t.goAnchor("#anchor-"+e.id),t.onFilter(e.id)}}},[t._v(t._s(e.title))])])}),0)}),0)])]):t._e(),i("div",{staticClass:"overflow-hidden",class:{mt60:1==t.is_groups,pt20:1==t.is_groups}},[i("base-link",{staticClass:"block",attrs:{to:""}},[i("base-img",{staticClass:"block w100",staticStyle:{height:"37vw"},attrs:{src:t.thumb?t.thumb:"~/assets/images/banner.png"}})],1)],1),i("div",{staticClass:"ptb5 plr15 bg-white"},[t.coupon.items?i("div",{staticClass:"overflow-auto-y bg-white border-radius20",staticStyle:{height:"85%"},on:{click:function(e){t.isShow=!t.isShow}}},[i("div",{staticClass:"ptb15 border-radius20 bg-white"},[i("div",{staticClass:"overflow-hidden flex-wrp relative coupons"},[i("div",{staticClass:"w0 flex-wrp flex-align-center border-radius10 relative fee",staticStyle:{flex:"7 1 0%"}},[i("div",{staticClass:"size30 bold text-right pr30 color46",staticStyle:{flex:"4"}},[[1,3,4].findIndex(function(e){return e==t.coupon.items[0].type})>-1?i("span",[t._v("￥")]):t._e(),i("span",{staticClass:"size42 color46"},[t._v(t._s(t.coupon.items[0].value))]),2==t.coupon.items[0].type?i("span",[t._v("折")]):t._e()]),i("div",{staticClass:"flex-wrp flex-cell",staticStyle:{flex:"6"}},[1==t.coupon.items[0].type?i("span",{staticClass:"size30 color48"},[t._v("满 "+t._s(t.coupon.items[0].condition)+" 立减")]):2==t.coupon.items[0].type?i("span",{staticClass:"size30 color48"},[t._v("最高抵 "+t._s(t._f("number_format")(t.coupon.items[0].condition))+" 元")]):3==t.coupon.items[0].type?i("span",{staticClass:"size30 color48"},[t._v("支付代金券")]):4==t.coupon.items[0].type?i("span",{staticClass:"size30 color48"},[t._v("新人专享券")]):t._e(),i("span",{staticClass:"size20 color5"},[t._v(t._s(t.coupon.items[0].shop.title))])])]),t._m(0)])])]):t._e()]),t._l(t.sectionsColor,function(e,o){return 1==t.is_groups?i("div",{key:o,staticClass:"bg-white sort",attrs:{id:"anchor-"+o}},[i("div",{staticClass:"border-b ptb15 flex-wrp bg-white flex-center"},[i("div",{staticClass:"flex-wrp flex-center"},[i("div",{staticClass:"line",class:e.backgroundColor}),i("div",{staticClass:"square",class:e.backgroundColor})]),i("div",{staticClass:"size34 plr20",class:e.color},[t._v(t._s(e.title))]),i("div",{staticClass:"flex-wrp flex-center"},[i("div",{staticClass:"square",class:e.backgroundColor}),i("div",{staticClass:"line",class:e.backgroundColor})])]),i("div",{staticClass:"flex-wrp flex-flow-row plr15 pt15"},t._l(e.data,function(e,o){return i("div",{staticClass:"relative plr5 mt10 w50"},[i("base-link",{attrs:{to:(21==e.module_id?"/groupbuy_":"/buying_")+e.id}},[i("img",{staticClass:"bg-cover w100 block",staticStyle:{height:"25vw"},attrs:{src:e.thumbnail}}),1==e.module_id?i("img",{staticClass:"badge",attrs:{src:s("bkRJ")}}):21==e.module_id?i("img",{staticClass:"badge",attrs:{src:s("IWD8")}}):t._e(),i("div",{staticClass:"flex-wrp flex-cell ptb20 border"},[i("div",{staticClass:"size22 color49 pl10 bg-greyicon border-r"},[t._v("已售"+t._s(e.saled_count)+"件")]),i("div",{staticClass:"size30 color37 pd10 compulsory-row lh120",staticStyle:{height:"58px"}},[t._v(t._s(e.name))]),i("div",{staticClass:"flex-wrp"},[i("div",{staticClass:"flex-wrp flex-cell plr20"},[1==e.module_id?i("div",{staticClass:"size22 color44"},[t._v("抢购价")]):21==e.module_id?i("div",{staticClass:"size22 color44"},[t._v("团购价")]):t._e(),i("div",{staticClass:"flex-wrp flex-center"},[i("div",{staticClass:"size18 color37"},[t._v("￥")]),i("div",{staticClass:"size34 color37"},[t._v(t._s(e.current_price))])])]),e.vip_info?i("div",{staticClass:"flex-wrp flex-cell pl10"},[i("div",{staticClass:"vip-label-bl size22"},[t._v("特价会员")]),i("div",{staticClass:"size34 color46 mt10"},[t._v(t._s(e.vip_info.fee))])]):i("div",{staticClass:"flex-wrp flex-end pl10"},[i("div",{staticClass:"size26 color4 del"},[t._v(t._s(e.price))])])])])])],1)}),0)]):t._e()}),0==t.is_groups?i("div",{staticClass:"flex-wrp flex-flow-row plr30 ptb30 bg-white"},t._l(t.sections,function(e,o){return i("div",{staticClass:"relative plr10 mt10 w50"},[i("base-link",{attrs:{to:(21==e.module_id?"/groupbuy_":"/buying_")+e.id}},[i("img",{staticClass:"bg-cover w100 block",staticStyle:{height:"26vw"},attrs:{src:e.thumbnail}}),1==e.module_id?i("img",{staticClass:"badge",attrs:{src:s("bkRJ")}}):21==e.module_id?i("img",{staticClass:"badge",attrs:{src:s("IWD8")}}):t._e(),i("div",{staticClass:"flex-wrp flex-cell ptb20 border"},[i("div",{staticClass:"size22 color49 mlr10 bg-greyicon"},[t._v("已售"+t._s(e.saled_count)+"件")]),i("div",{staticClass:"size30 color37 pd10 compulsory-row",staticStyle:{height:"58px"}},[t._v(t._s(e.name))]),i("div",{staticClass:"flex-wrp"},[i("div",{staticClass:"flex-wrp flex-cell plr20"},[1==e.module_id?i("div",{staticClass:"size22 color44"},[t._v("抢购价")]):21==e.module_id?i("div",{staticClass:"size22 color44"},[t._v("团购价")]):t._e(),i("div",{staticClass:"flex-wrp flex-center"},[i("div",{staticClass:"size18 color37"},[t._v("￥")]),i("div",{staticClass:"size34 color37"},[t._v(t._s(e.current_price))])])]),e.vip_info?i("div",{staticClass:"flex-wrp flex-cell pl10"},[i("div",{staticClass:"vip-label-bl size26"},[t._v("特价会员")]),i("div",{staticClass:"size34 color46 mt5"},[t._v(t._s(e.vip_info.fee))])]):i("div",{staticClass:"flex-wrp flex-end pl10"},[i("div",{staticClass:"size34 color4 del"},[t._v(t._s(e.price))])])])])])],1)}),0):t._e(),i("div",{staticClass:"bg-white pb20"},[i("div",{staticClass:"border-b flex-wrp flex-center size30 color37 ptb20"},[t._v("活动说明")]),i("div",{staticClass:"size24 color34 pt20 pb10 plr50 "},[t._v("活动时间： "+t._s(t.begin_time)+"-"+t._s(t.end_time))]),i("div",{staticClass:"size24 color37 plr50 ",domProps:{innerHTML:t._s(t.rule)}})]),t.isShow?i("div",{staticClass:"mask pd20 weui-animate-fade-in flex-wrp flex-cell flex-center"},[i("div",{staticClass:"w100 bg-white weui-animate-fade-in border-radius20",staticStyle:{height:"58%"}},[i("div",{staticClass:"size40 color1 ptb30 bg-red flex-wrp flex-center gradual"},[t._v("领取优惠券")]),i("div",{staticClass:"overflow-auto-y mb10 bg-white border-radius20",staticStyle:{height:"85%"}},t._l(t.couponItemsArr,function(e,s){return i("div",{key:s,staticClass:"plr20 flex-wrp flex-cell flex-middle border-radius20 bg-white",staticStyle:{height:"25%"}},[i("div",{staticClass:"overflow-hidden flex-wrp relative coupons"},[i("div",{staticClass:"w0 flex-wrp flex-align-center border-radius10 relative fee",staticStyle:{flex:"7 1 0%"}},[i("div",{staticClass:"size30 bold text-right pr30 color46",staticStyle:{flex:"4"}},[[1,3,4].findIndex(function(t){return t==e.type})>-1?i("span",[t._v("￥")]):t._e(),i("span",{staticClass:"size42 color46"},[t._v(t._s(e.value))]),2==e.type?i("span",[t._v("折")]):t._e()]),i("div",{staticClass:"flex-wrp flex-cell",staticStyle:{flex:"6"}},[1==e.type?i("span",{staticClass:"size30 color48"},[t._v("满 "+t._s(e.condition)+" 立减")]):2==e.type?i("span",{staticClass:"size30 color48"},[t._v("最高抵 "+t._s(t._f("number_format")(e.condition))+" 元")]):3==e.type?i("span",{staticClass:"size30 color48"},[t._v("支付代金券")]):4==e.type?i("span",{staticClass:"size30 color48"},[t._v("新人专享券")]):t._e(),i("span",{staticClass:"size20 color5"},[t._v(t._s(e.shop.title))])])]),i("div",{staticClass:"w0 flex-wrp flex-center border-radius10 plr20 ptb25 action",staticStyle:{flex:"3 1 0%"}},[i("button",{staticClass:"weui-btn weui-btn_warn color1 size30 border-radius35",class:{"bg-gray":!e.is_getcoupon},on:{click:function(s){return t.getCoupon(e)}}},[t._v("\n                                "+t._s(e.getcoutxt)+"\n                            ")])])])])}),0)]),i("div",{staticClass:"flex-wrp flex-center mt40 border-radius",on:{click:function(e){t.isShow=!t.isShow}}},[i("img",{staticClass:"size60",staticStyle:{width:"60px",height:"60px"},attrs:{src:s("w565")}})])]):t._e()],2)};i._withStripped=!0;var o={render:i,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w0 flex-wrp flex-center border-radius10 plr25 pd25 action",staticStyle:{flex:"3 1 0%"}},[e("div",{staticClass:"bg-deepred color1 size30 border-radius35 plr45 ptb10"},[this._v("领取")])])}]};e.a=o},IWD8:function(t,e,s){t.exports=s.p+"img/icon2.ef540fc.png"},ZRAU:function(t,e,s){var i=s("tlyq");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("507f4eb4",i,!1,{sourceMap:!1})},bkRJ:function(t,e,s){t.exports=s.p+"img/icon1.9a4d79e.png"},tlyq:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,'.cate[data-v-5cc1cab3]{position:fixed;z-index:5;width:100%;top:0;left:0}.cate-active[data-v-5cc1cab3]{color:#eb5336}.site[data-v-5cc1cab3]{width:.78125rem;height:.90625rem;display:inline-block}.coupons[data-v-5cc1cab3]{background-color:#fffbfa}.coupons .fee[data-v-5cc1cab3]{border:.03125rem solid #fd8180;border-right:none;border-left:.3125rem solid #eb5436}.coupons .fee[data-v-5cc1cab3]:after,.coupons .fee[data-v-5cc1cab3]:before{position:absolute;display:block;content:"";width:1rem;height:1rem;border:.03125rem solid #fd8180;background-color:#fff;right:-.5rem;border-radius:50%;z-index:3}.coupons .fee[data-v-5cc1cab3]:before{top:-.5rem}.coupons .fee[data-v-5cc1cab3]:after{bottom:-.5rem}.action[data-v-5cc1cab3]{border:.03125rem solid #fd8180;border-left:.03125rem dashed #fd8180}.line[data-v-5cc1cab3]{width:1.5625rem;height:.0625rem}.square[data-v-5cc1cab3]{width:.3125rem;height:.3125rem;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.badge[data-v-5cc1cab3]{position:absolute;top:.03125rem;left:.15625rem;width:2.375rem;height:1.59375rem}.gradual[data-v-5cc1cab3]{background:-webkit-gradient(linear,left top,right top,from(#f66b1c),to(#fc5957));background:linear-gradient(left,#f66b1c,#fc5957);border-top-left-radius:.625rem;border-top-right-radius:.625rem}',""])},vcu4:function(t,e,s){"use strict";var i=s("woOf"),o=s.n(i),r=s("Dd8w"),a=s.n(r),c=s("Xxa5"),l=s.n(c),n=s("exGp"),d=s.n(n),u=s("NYxO"),p=s("PJh5"),f=s.n(p),v=s("DHvs"),m=(s("0NhW"),s("vTey")),b=s.n(m);e.a={data:function(){return{now:f()(),isShow:!1,filter:{category_id:0},sections:[]}},asyncData:function(){var t=d()(l.a.mark(function t(e){var s,i,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.b.get("/buying/page/"+e.params.id,null,e);case 2:if(s=t.sent,i=s.data,200!==(o=s.status)){t.next=12;break}if("FAIL"!==i.code){t.next=8;break}return t.abrupt("return",e.error({message:i.msg}));case 8:if("SUCCESS"!==i.code){t.next=10;break}return t.abrupt("return",i.data);case 10:t.next=13;break;case 12:return t.abrupt("return",e.error({statusCode:o,message:"专题活动不存在或已结束"}));case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),head:function(){return{title:this.theme+"-专题活动"}},computed:a()({},Object(u.mapState)({config:function(t){return t.config},user:function(t){return t.user.info}}),{cateGroup:function(){return b()(this.sections,4)},couponItemsArr:function(){return this.getcouponMap(),this.coupon.items},sectionsColor:function(){return this.getColor(),this.sections}}),mounted:function(){window.addEventListener("scroll",this.handleScroll)},methods:{goAnchor:function(t){var e=this.$el.querySelector(t).offsetTop-42,s=document.documentElement.scrollTop||document.body.scrollTop,i=e/30;e>s?function t(){s<e?(s+=i,document.body.scrollTop=s,document.documentElement.scrollTop=s,setTimeout(t,10)):(document.body.scrollTop=e,document.documentElement.scrollTop=e)}():(i=(s-e)/30,function t(){s>e?(s-=i,document.body.scrollTop=s,document.documentElement.scrollTop=s,setTimeout(t,10)):(document.body.scrollTop=e,document.documentElement.scrollTop=e)}());window.removeEventListener("scroll",this.handleScroll),setTimeout(this.getScroll,1500)},handleScroll:function(){for(var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.querySelectorAll(".sort"),s=0;s<e.length;s++)t>=e[e.length-1].offsetTop-112?this.filter.category_id=e[s].id.substr(e[s].id.length-1,1):t>=e[s].offsetTop-112&&e[s+1].offsetTop-112>t&&(this.filter.category_id=e[s].id.substr(e[s].id.length-1,1))},onFilter:function(t){this.filter.category_id=t},getCoupon:function(){var t=d()(l.a.mark(function t(e){var s,i,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.receive_num<e.limit_num)){t.next=8;break}return s=weui.loading("加载中..."),t.next=4,v.b.post("/new_coupon/"+e.id+"/receive",{from:5});case 4:i=t.sent,r=i.data,s.hide(),"SUCCESS"===r.code?(this.coupon.items=this.coupon.items.map(function(t){return t.id===r.res.coupon_id?o()({},t,{is_receive:!0,receive_num:parseInt(t.receive_num)+1}):t}),weui.toast("领取成功")):r.msg&&weui.alert(r.msg,{title:"领取失败"});case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getScroll:function(){window.addEventListener("scroll",this.handleScroll)},getcouponMap:function(){this.coupon.items&&(this.coupon.items=this.coupon.items.map(function(t){return"4"===t.type&&t.is_receive&&t.receive_num>=t.limit_num?o()({},t,{is_getcoupon:!1,getcoutxt:"已领取"}):t.receive_num>=t.limit_num?o()({},t,{is_getcoupon:!1,getcoutxt:"已领取"}):new Date>=new Date(t.use_end_time)?o()({},t,{is_getcoupon:!1,getcoutxt:"已结束"}):o()({},t,{is_getcoupon:!0,getcoutxt:"领取"})}))}}}},w565:function(t,e,s){t.exports=s.p+"img/close.e8b42fd.svg"}});